---
title: Parallels虚拟机无法使用lt2p网络的问题
categories:
  - macOS
date: 2020-06-24 12:35:00
updated: 2020-06-24 12:35:00
tags: 
  - macOS
  - Parallels
  - L2TP
---

本来是用的 macOS，奈何很多服务环境是需要在 windows 下的，所以装了个虚拟机。但是比较蛋疼的是，虚拟机，虽然可以通过 l2tp 拨号，但是却无法访问 PPP 对端的网络。

<!--more-->

具体的情况就是，我已经拿到了 l2tp 分配的IP，l2tp 实际上是一个 PPP 的适配器，也就是一个点对点的适配器。我分配的IP是 172.18.1.207，而对端IP 是 172.18.1.254。

通过 ARP 能看到这些信息：

```
PPP 适配器 VPN 连接:

   连接特定的 DNS 后缀 . . . . . . . :
   IPv4 地址 . . . . . . . . . . . . : 172.18.1.207
   子网掩码  . . . . . . . . . . . . : 255.255.255.255
   默认网关. . . . . . . . . . . . . :

```

关联信息：

```
接口: 172.18.1.207 --- 0x1e
 Internet 地址         物理地址              类型
 172.18.1.254                                静态
 192.168.3.2                                 静态
 224.0.0.22                                  静态
 224.0.0.251                                 静态
 224.0.0.252                                 静态
 239.255.255.250                             静态
 255.255.255.255                             静态
```

而我却始终无法进行通信：

```
正在 Ping 172.18.1.254 具有 32 字节的数据:
一般故障。
一般故障。
一般故障。
一般故障。

72.18.1.254 的 Ping 统计信息:
   数据包: 已发送 = 4，已接收 = 0，丢失 = 4 (100% 丢失)，
```

# 解决办法

[官方的解决办法](https://kb.parallels.com/123071)， macOS 上连上 VPN，设置好路由，使用共享网络的形式，和虚拟机组网就行了。

为什么会这样呢？